from server import Server
import os
from collections import defaultdict

if os.path.exists("secret.txt"):
    f = open("secret.txt", "r")
    my_token = f.readline()[:-1]
    my_group_id = f.readline()
    f.close()
else:
    my_token = os.environ.get("MY_TOKEN")
    my_group_id = os.environ.get("MY_GROUP_ID")

# my_subjects = ["subjs/web", "subjs/linux", "subjs/primat", "subjs/uml", "subjs/ml"]
# my_subj_dict = {"–≤–µ–±": 0, "web": 0, "–ª–∏–Ω—É–∫—Å": 1, "linux": 1, "–ø—Ä–∏–º–∞—Ç": 2, "uml": 3, "—é–º–ª": 3, "ml": 4, "–º–ª": 4}
# my_namesofsubjs = ["–≤–µ–±", "–ª–∏–Ω—É–∫—Å", "–ø—Ä–∏–º–∞—Ç", "—é–º–ª", "–º–ª"]
# my_subjects = ["subjs/web", "subjs/archIS", "subjs/TSIT"]
# my_subj_dict = {"–≤–µ–±": 0, "web": 0, "–±–µ–±": 0, "–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏—Å": 1, "–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞": 1, "–∏—Å": 1, "—Ç—Å–∏—Ç": 2,
#                 "—Ç–µ–ª–µ–∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏": 2, "—Å–µ—Ç–∏": 2}
# my_namesofsubjs = ["–≤–µ–±", "–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏—Å", "—Ç–µ–ª–µ–∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏"]
my_subjects = ["subjs/bd", "subjs/po", "subjs/svi"]
my_subj_dict = {"–±–¥": 0, "–ø–ø–æ": 1, "–ø–æ": 1, "—Å–≤–∏": 2}
my_namesofsubjs = ["–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö", "–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è",
                   "—Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∏"]
my_slovechki = {'!—Å–ø–∞—Å–∏–±–æ': '–ø–æ–∂–∞–ª—É—Å—Ç–∞!!!!!!!!!!!!',
             '!–ø—Ä–æ—Å—Ç–∏': '–ø–æ—Å–æ—Å–∏',
             '–º–æ–π.': '—Ñ–∞–∫—Ç!',
             '–Ω–∞—à.': '–Ω–∞—à –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ!',
             '–Ω–∞—à)': '–Ω–∞—à –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ!',
             '–º–æ–π)': '—Ñ–∞–∫—Ç!',
             '!–æ—Ç—á–∏—Å–ª–∏—Ç—å –¥–∏–º—É': '–¥–∏–º –¥–∏–º–æ–≤–∏—á –¥–∏–º—ã—á –æ—Ç—á–∏—Å–ª–µ–Ω —Å –ø–æ–∑–æ—Ä–æ–ºüò§',
             '!—Å–∞–π—Ç': 'https://usachova.github.io/ITMO-WEB/',
             '!—É–¥–∞–ª–∏—Ç—å—Å—è –∏–∑ –∂–∏–∑–Ω–∏': '—Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –º–∞—à–∏ .'}

svi_num = {
    1: "–ó—è–±–∏—Ä–æ–≤–∞ –ê–ª–∏–Ω–∞, –ú–∞—Å–ª–æ–≤ –ú–∏—Ö–∞–∏–ª, –£—Å–∞—á—ë–≤–∞ –ú–∞—Ä–∏—è, –•—Ä–∞–ø–æ–≤–∏—Ü–∫–∏–π –î–∞–Ω–∏–∏–ª + –∞–ª—å–ø–∞–∫–æ–≤ü¶ô",
    2: "–ì–∞–ª–µ–µ–≤ –ê–±–¥–µ—Ä–∞—à–∏–¥, –ó–µ–Ω–æ–≤–∏—á –ê—Ä—Ç–µ–º, –ú–µ—â–µ—Ä—Å–∫–∞—è –ï–ª–∏–∑–∞–≤–µ—Ç–∞, –°–µ–≤–∞—Å—Ç—å—è–Ω–æ–≤ –Æ—Ä–∏–π, –®—É–∫—à–∏–Ω–∞ –ò—Ä–∏–Ω–∞",
    3: "–ö–∞–∑–∞–∫–æ–≤ –ù–∏–∫–∏—Ç–∞, –ü–ª–µ—â–∏–∫–æ–≤ –î–∏–º–∏—Ç—Ä–∏–π, –ó–∞—Ö–∞—Ä–æ–≤ –¢–∏–º–æ—Ñ–µ–π, –ß—É–ª–∫–æ–≤ –†—É—Å–ª–∞–Ω",
    4: "–ì—Ä–∏–¥–∏–Ω–∞—Ä—å –ù–∏–∫–æ–ª–∞–π, –ö—É–∑—å–º—É–∫ –ü–∞–≤–µ–ª, –¢–∞—Ä–∞—Å–æ–≤ –î–µ–Ω–∏—Å, –¢—Ä—É—Ç–Ω–µ–≤ –°–µ–≤–∞—Å—Ç—å—è–Ω"
}

svi_people = {
    "–•—Ä–∞–ø–æ–≤–∏—Ü–∫–∏–π": 1, "–£—Å–∞—á—ë–≤–∞": 1, "–ú–∞—Å–ª–æ–≤": 1, "–ó—è–±–∏—Ä–æ–≤–∞": 1,
    "–¢–∏–º–æ—Ñ–µ–µ–≤": 3, "–ß—É–ª–∫–æ–≤": 3, "–õ–µ—â–∏–∫–æ–≤": 3, "–ö–∞–∑–∞–∫–æ–≤": 3,
    "–ì–∞–ª–µ–µ–≤": 2, "–õ–∞–π—Ç–æ–≤": 2, "–®—É–∫—à–∏–Ω–∞": 2, "–ó–µ–Ω–æ–≤–∏—á": 2, "–ú–µ—â–µ—Ä—Å–∫–∞—è": 2,
    "–¢—Ä—É—Ç–Ω–µ–≤": 4, "–ö—É–∑—å–º—É–∫": 4, "–ò–∑–º–∞–∏–ª–æ–≤–∞": 4, "–ö–æ–ø–µ—Ä–Ω–∏–∫": 4
}

tsit_num = {1: "–°–µ—Å–∏–Ω –°–µ—Ä–≥–µ–π, –ñ—É–∫–æ–≤ –ú–∞–∫—Å–∏–º, –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –í–µ–ª–∏–∫–æ–¥–Ω—ã–π (–ú33081)",
            2: "–•—Ä–∞–ø–æ–≤–∏—Ü–∫–∏–π –î–∞–Ω–∏–∏–ª, –£—Å–∞—á—ë–≤–∞ –ú–∞—Ä–∏—è, –ú–∞—Å–ª–æ–≤ –ú–∏—Ö–∞–∏–ª",
            3: "–ò–≤–∞–Ω–æ–≤ –ï–≤–≥–µ–Ω–∏–π, –ò–≤–∞–Ω–æ–≤ –ê–Ω–∞—Ç–æ–ª–∏–π (–ú33011), –®–∞—Ä–∏—Ñ–æ–≤ –°–∞—Ä–¥–æ—Ä–±–µ–∫",
            4: "–ó—è–±–∏—Ä–æ–≤–∞ –ê–ª–∏–Ω–∞, –§–µ–¥–æ—Ç–µ–Ω–∫–æ –ù–∏–∫–æ–ª–∞–π (M33122), –ö—É–∫—É–ª–∏–¥–∏ –î–º–∏—Ç—Ä–∏–π (M33122)",
            5: "–¢–∏–º–æ—Ñ–µ–µ–≤ –ó–∞—Ö–∞—Ä, –ß—É–ª–∫–æ–≤ –†—É—Å–ª–∞–Ω, –õ–µ—â–∏–∫–æ–≤ –î–º–∏—Ç—Ä–∏–π",
            6: "–ì–∞–ª–µ–µ–≤ –ê–±–¥–µ—Ä–∞—à–∏–¥, –°–µ–≤–∞—Å—Ç—å—è–Ω–æ–≤ –Æ—Ä–∏–π, –®—É–∫—à–∏–Ω–∞ –ò—Ä–∏–Ω–∞",
            7: "–¢—Ä—É—Ç–Ω–µ–≤ –°–µ–≤–∞—Å—Ç—å—è–Ω, –ö—É–∑—å–º—É–∫ –ü–∞–≤–µ–ª",
            8: "–¢–∞—Ä–∞—Å–æ–≤ –î–µ–Ω–∏—Å, –ì—Ä–∏–¥–∏–Ω–∞—Ä—å –ù–∏–∫–æ–ª–∞–π",
            9: "–î—ã–º—á–∏–∫–æ–≤–∞ –ê—é–Ω–∞, –ö–∞–∑–∞–∫–æ–≤ –ù–∏–∫–∏—Ç–∞, –î–µ–ª—è–Ω—É –ö–∏—Ä–∏–ª–ª (M33081)",
            10: "–ó–µ–Ω–æ–≤–∏—á –ê—Ä—Ç–µ–º, –ú–µ—â–µ—Ä—Å–∫–∞—è –ï–ª–∏–∑–∞–≤–µ—Ç–∞"
}
tsit_people = {"–°–µ—Å–∏–Ω": 1, "–ñ—É–∫–æ–≤": 1,
               "–•—Ä–∞–ø–æ–≤–∏—Ü–∫–∏–π": 2, "–£—Å–∞—á—ë–≤–∞": 2, "–ú–∞—Å–ª–æ–≤": 2,
               "–ò–≤–∞–Ω–æ–≤": 3, "–®–∞—Ä–∏—Ñ–æ–≤": 3,
               "–ó—è–±–∏—Ä–æ–≤–∞": 4, "–§–µ–¥–æ—Ç–µ–Ω–∫–æ": 4,
               "–¢–∏–º–æ—Ñ–µ–µ–≤": 5, "–ß—É–ª–∫–æ–≤": 5, "–õ–µ—â–∏–∫–æ–≤": 5,
               "–ì–∞–ª–µ–µ–≤": 6, "–õ–∞–π—Ç–æ–≤": 6, "–®—É–∫—à–∏–Ω–∞": 6,
               "–¢—Ä—É—Ç–Ω–µ–≤": 7, "–ö—É–∑—å–º—É–∫": 7,
               "–ò–∑–º–∞–∏–ª–æ–≤–∞": 8, "–ö–æ–ø–µ—Ä–Ω–∏–∫": 8,
               "–ê–ª–µ—Å–∞–Ω–æ–≤–∞": 9, "–ö–∞–∑–∞–∫–æ–≤": 9,
               "–ó–µ–Ω–æ–≤–∏—á": 10, "–ú–µ—â–µ—Ä—Å–∫–∞—è": 10
}

my_server = Server(my_token, my_group_id)
my_server.start(my_subjects, my_subj_dict, my_namesofsubjs, my_slovechki, tsit_num, tsit_people)


# Automatically launch when terminating (for Heroku)
def thread_function():
    while True:
        try:
            time.sleep(1200)
        except:
            pass


if __name__ == "__main__":
    x1 = threading.Thread(target=thread_function, args=())
    x1.start()
